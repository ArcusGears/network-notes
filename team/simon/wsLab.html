<div id="wsLab"  style="display:none;">
	<h1>Wireshark Lab</h1>
	<h2><u>Looking at 802.11 Frames</u></h2>
	<br><br>
	<p>Using a packet sniffer doesn't solely reveal the inner workings of wired networks. WiFi networks have their own unique architecture, with protocol set by IEEE 802.11 specifications. WLAN networks are linked via access points (APs), each of which converts 802.11 frames into Ethernet frames which can be interpreted by a parent router. Each AP can link multiple hosts to a router; the branches consisting of these hosts, the AP, and the router are each known as subnets.<br><br>
Packet sniffers operate over link layer transactions, and unfortunately, 802.11 drivers often lack the proper "hooks" that Ethernet drivers have to allow capture. There are workarounds for this, but for the purposes of this lab, a sample 802.11 trace has been provided.
<br><br>
<ol>
	<li>Launch Wireshark and open the provided 802.11 capture file.</li>
	<li>Highlight the very first frame. Each frame has space for three MAC addresses(technically four, but only when APs are linked directly), frame control tags that correspond to categories of messages, and a checksum. For the first frame, in the frame control field, you should see a type of 0 and a subtype of 8. This signifies a broadcast. Broadcasts are frames sent periodically by APs across 802.11 frequency channels. You'll notice that the destination MAC address is simply filled with "ff"s in every hexidecimal place. This means that the frame has no specific destination, and is simply being sent across the entire channel. When a 802.11 capable host enters the range of a network, passive scanning will pick up the broadcast and notify the user of the APs presence.</li>
	<li>Now, scroll down to around 24.82 seconds. Here, the host makes a request to an off network server. Look first at the TCP SYN packet. The transmitter address field will always contain the address of the currently transmitting device, and the receiver field will accordingly contain the address of the transmitted-to device. In this case, the transmitter is the host making the request (IntelCor_d1:b6:4f) and the receiver is the AP associated with that host (Cisco-Li_f7:1d:51). Notice that the destination field here is different. This is the MAC address for the parent router; when the AP converts the 802.11 data into Ethernet, it will use this field as the new receiver address. IP protocol data rides higher in the protocol stack, and once the packet reaches the router, it will be forwarded to the IP address of the server.</li>
	<li>Looking at the SYN ACK packet tells us a bit more about the addresses. When the parent router is involved, whether it be the source or the destination, it will always be indicated in those fields; in fact, these two fields are actually different names for the same field. Notice here that the source address is now occupied by the router.</li>
	<li>Finally, let's look at protocol for authentication. At t=49.58, the host requests to disassociate from the AP. It sends two messages: the first is an IP layer message to the parent router which removes it from the subnet, and the second is a frame directly to the AP to deauthenticate the host.</li>
	<li>After this, the host attempts to associate and authenticate with a linksys AP (Cisco-Li_f5). You can look through these attempts if you want; for whatever reason, there is never a reply from this AP. The host then authenticates once more with the previous AP. This process is much shorter and sweeter, consisting of only two exchanges at around t=63. It also includes another IP layer message to the router, requesting to be placed on the subnet again.</li>
	<li>Hosts can elect to actively scan instead of passively scan. These attempts are denotes by the probe requests you may have seen while scrolling through the trace. These play out in the opposite manner of passive scanning: the host broadcasts a request over several 802.11 channels and waits for a direct response from nearby APs.</li>
</div>
